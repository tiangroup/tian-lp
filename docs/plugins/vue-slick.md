# Slick slider

Официальная документация компонента: [https://www.npmjs.com/package/vue-slick](https://www.npmjs.com/package/vue-slick)

У слика проблемы с динамически добавляемыми элементами и прочими реактивностями. Есть 2 пути решения.

## client-only

Слик нужно оборачивать в `<client-only>`. Для компонентов, для которых критична индексация содержимого слайдера задаем placeholder

```vue
<client-only>
  <slick>
    <video-item></video-item>
  </slick>
  <template slot="placeholder">
    <video-item :isEdit="false"></video-item>
  </template>
</client-only>
```

## Директива :key для динамически пересоздаваемого слика

## Обновление слика через v-if

### Реактивное добавление, удаление, перемещение слайдов

При использовании slick с реактивным редактированием элементов (в т.ч. добавление, удаление, перемещение слайдов), необходимо вручную обновлять слайдер. Для этого задаеца переменная isSlick:true и создаеца метод

```js
restartSlick() {
    this.isSlick = false;
    const _this = this;
    setTimeout(function() {
        _this.isSlick = true;
      }, 200);
  }
```

#### NB: значение таймаута < 200 дает некорректную отрисовку слайдера - картинок в клонированных слайдах (.slick-cloned) нет.

У компонента [buttons-item](/components/admin/ButtonsItem.vue) можно использовать событие @onAction

```vue
<buttons-item ... @onAction="restartSlick" />
```

### Добавление первого элемента в коллекцию кнопкой \<buttons-item-add\>

Вручную перерисовывать слайдер. Пока решено через отслеживание количества элементов в section.items и если было 0, стало 1, перерисовываеца слайдер. Теоретически можно было бы использовать эту схему для перерисовки слайдера в прочих случаях, описанных выше (см. Реактивное добавление, удаление, перемещение слайдов), но перемещение элементов не дает обновления section.items -> слайдер не перерисовываеца.

### Реактивные изменения отображения слайдера в зависимости от параметров страницы

Также не забывать отслеживать реактивные изменения через watch и перезагружать слик при необходимости. Например, в режиме редактирования у слайдеров infinity: false, а в режиме просмотра infinity: true. Тогда в watch отслеживаем переменную isEdit, которая отвечает за отображение элементов режима редактирования

```js
watch: {
  isEdit: function () {
      this.restartSlick();
  },
},
```

### Клики на клонированных слайдах

При infinity: true создаюца клоны слайдов, на которые не копируюца вьюшные события. Клики и другие события нужно отслеживать вручную через метод handleInit()

```vue
<slick @init="handleInit"></slick>
```
